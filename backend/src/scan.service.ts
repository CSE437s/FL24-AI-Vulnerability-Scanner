// src/scan.service.ts
import { Injectable } from '@nestjs/common';
import { ScanGateway } from './scan.gateway';

@Injectable()
export class ScanService {
  constructor(private readonly scanGateway: ScanGateway) {}

  startScan() {
    // Simulate scanning process
    let progress = 0;
    const interval = setInterval(() => {
      progress += 10;
      this.scanGateway.sendProgress({ progress });
      if (progress >= 100) {
        clearInterval(interval);
      }
    }, 1000);
  }
}
